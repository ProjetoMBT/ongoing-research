<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0074)http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html -->
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" class="regenabled browserSafari radius jsenabled regloaded translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Java IDL: O exemplo "Hello World"</title>

<script language="javascript1.2" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/popUp.js"></script>
<script language="javascript1.2" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/sniff.js"></script>
<script language="javascript1.2" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/menucontent.js"></script>
<script language="javascript1.2" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/menucode.js"></script>
<script language="javascript1.2" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/developer.js"></script>
<script language="javascript1.2" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/search.js"></script>
<link rel="stylesheet" href="./Java IDL_ O exemplo _Hello World__files/default_developer.css">
<meta name="collection" content="reference"> 
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./Java IDL_ O exemplo _Hello World__files/translateelement.css"></head>
<body>
<noscript>JavaScript is not supported by your browser. JavaScript
support is required for full functionality of this page.</noscript>
<div class="a0 a0v1" id="a0v1"><!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1 a1r2">
<div class="a1v0"><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html#skip2content" class="skiplink"><font><font>Ir para o conteúdo</font></font></a></div>
</div>
<!-- END A1 COMPONENT V.0 -->
<!-- BEGIN A2 COMPONENT V.1 -->
<div class="a2w0">
<div class="a2" id="a2v1">
<div class="a2w1">
<div class="a2w2">
<div class="a2w3">
<div class="a2w4">
<div class="a2topiclinks"><a href="http://www.oracle.com/" title="Página inicial do Oracle" id="sunlogo" name="sunlogo"><img src="./Java IDL_ O exemplo _Hello World__files/a.gif" alt="Pagina inicial" width="98" height="58" border="0"></a>
<ul id="mtopics">
<li id="mtopic1" class=" a2nomenu"><a id="glink1" class="tpclink a2menu" title="Consulte Oracle Technology Network" href="http://oracle.com/technology" name="glink1"><font><font>Rede de Tecnologia Oracle</font></font></a></li>
<li id="mtopic2" class=" a2nomenu"><a id="glink2" class="tpclink a2menu" title="Downloads de software" href="http://www.oracle.com/technology/software/index.html" name="glink2"><font><font>Downloads de software</font></font></a></li>
<li id="mtopic3" class=" a2nomenu"><a id="glink3" class="tpclink a2menu" title="Consulte Documentação do Java SE" href="http://download.oracle.com/javase/index.html" name="glink3"><font><font>Documentação</font></font></a></li>
</ul>
<div class="a2search"><a href="http://docs.oracle.com/javase/search.html" target="_blank"><font><font>Pesquisa</font></font></a></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- END A2 COMPONENT V.1 -->
<!-- BEGIN SEPARATOR -->
<div class="hr">
<hr></div>
<!-- END SEPARATOR -->
<!-- ============ -->
<!-- MAIN CONTENT -->
<!-- ============ -->
<a name="skip2content" id="skip2content"></a>


<div class="smallpagetitle"><h1><font><font>Java IDL: O exemplo "Hello World"</font></font></h1></div>
<h2 align="center"><font><font>Modelo POA, </font><font>
servidor </font></font><strong><font><font>transitório</font></font></strong><font></font></h2>
<p><font><font>Este documento é uma visão geral de alto nível sobre como criar uma aplicação completa CORBA (Common Object Request Broker Architecture) usando IDL (Interface Definiton Language) para definir interfaces eo compilador IDL Java para gerar stubs e esqueletos. </font><font>Para obter mais informações sobre o processo de desenvolvimento e um tutorial mais detalhado sobre a criação de um aplicativo CORBA usando IDL, consulte Introdução </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/GShome.html"><font><font>ao Java IDL: The Hello World Tutorial</font></font></a><font><font> . </font><font>Você também pode criar aplicativos CORBA definindo as interfaces na linguagem de programação Java. </font><font>Para obter mais informações e um tutorial sobre esse processo de desenvolvimento, consulte a
 </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/rmi-iiop/index.html"><font><font>documentação Java RMI-IIOP</font></font></a><font><font> .</font></font></p>
<p><font><font>Nesta versão do Java SE, a implementação do lado do servidor gerada pelo </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> é o </font></font><em><font><font>Portable Herança do Servidor</font></font></em><font><font> , também </font><em><font>conhecido</font></em><font> como o modelo POA. </font><font>O POA, ou Adaptador de Objeto Portátil, é discutido em mais detalhes no Adaptador </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/POA.html"><font><font>de Objeto Portátil</font></font></a><font><font> . </font><font>Este documento apresenta um exemplo de aplicativo criado usando o comportamento padrão do
 </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> , que usa um modelo do lado do servidor POA.</font></font></p>
<p><font><font>O CORBA suporta pelo menos dois mapeamentos diferentes do lado do servidor para implementar uma interface IDL:</font></font></p>
<ul>
<li><font><font>O modelo de herança
</font></font><p><font><font>Usando o Modelo de Herança, você implementa a interface IDL usando uma classe de implementação que também estende o esqueleto gerado pelo compilador.</font></font></p>
<p><font><font>Os modelos de herança incluem:</font></font></p>
<ul>
<li><font><font>O OMG-padrão, </font></font><em><font><font>POA</font></font></em><font><font> . </font><font>Dada uma interface </font></font><tt><font><font>My</font></font></tt><font><font> 
definida em </font></font><tt><font><font>My.idl</font></font></tt><font><font> , o arquivo </font></font><tt><font><font>MyPOA.java</font></font></tt><font><font> é gerado pelo </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> . </font><font>Você deve fornecer a implementação para </font></font><tt><font><font>My</font></font></tt><font><font> e deve herdar de
 </font></font><tt><font><font>MyPOA</font></font></tt><font><font> , um </font><tt><font>esqueleto</font></tt><font> baseado em fluxo que estende o </font></font><a href="http://docs.oracle.com/javase/7/docs/api/org/omg/PortableServer/Servant.html"><tt><font><font>org.omg.PortableServer.Servant</font></font></tt></a><font><font> 
, que serve como a classe base para todas as implementações do servidor POA.</font></font></li>
<li><em><font><font>ImplBase</font></font></em><font><font> . </font><font>Dada uma interface </font></font><tt><font><font>My</font></font></tt><font><font> definida em
 </font></font><tt><font><font>My.idl</font></font></tt><font><font> , o arquivo </font></font><tt><font><font>_MyImplBase.java</font></font></tt><font><font> é gerado. </font><font>Você deve fornecer a implementação para </font></font><tt><font><font>My</font></font></tt><font><font> e ele deve herdar de </font></font><tt><font><font>_MyImplBase</font></font></tt><font><font> .
</font></font><p><strong><font><font>NOTA: O</font></font></strong><font><font> ImplBase é reprovado em favor do modelo POA, mas é fornecido para permitir compatibilidade com servidores escritos em J2SE 1.3 e anteriores. </font><font>Não recomendamos a criação de novos servidores usando este modelo não padrão.</font></font></p>
</li>
</ul>
</li>
<li><font><font>O modelo de delegação
</font></font><p><font><font>Usando o Modelo de Delegação, você implementa a interface IDL usando duas classes:</font></font></p>
<ul>
<li><font><font>Uma classe Tie gerada por IDL que herda do esqueleto gerado pelo compilador, mas delega todas as chamadas para uma classe de implementação.</font></font></li>
<li><font><font>Uma classe que implementa a interface de operações gerada por IDL (como </font></font><tt><font><font>HelloOperations</font></font></tt><font><font> ), que define a função IDL.</font></font></li>
</ul>
<p><font><font>O modelo de delegação também é conhecido como </font><font>modelo </font></font><em><font><font>Tie</font></font></em><font><font> ou o modelo Tie Delegation. </font><font>Ele herda do esqueleto gerado pelo compilador POA ou ImplBase, portanto os modelos serão descritos como modelos POA / Tie ou ImplBase / Tie neste documento.</font></font></p>
</li>
</ul>
<p><font><font>Este tutorial apresenta o modelo de herança POA para a implementação do lado do servidor. </font><font>Para tutoriais usando as outras implementações do lado do servidor, consulte os seguintes documentos:</font></font></p>
<ul>
<li><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlTieServer.html"><font><font>Java IDL: O exemplo "Hello World" com o modelo POA / Tie do lado do servidor</font></font></a>
<p><font><font>O Modelo Tie é um modelo de delegação. </font><font>Use o </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> 
para gerar primeiro ligações do lado do servidor. </font><font>Em seguida, execute o
 </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> uma segunda vez com o com a
 </font><font>opção </font></font><tt><font><font>-fallTie</font></font></tt><font><font> para gerar Tie </font><tt><font>vinculações</font></tt><font> do servidor lado do servidor. </font><font>Para a interface </font></font><tt><font><font>Hello</font></font></tt><font><font> ,
 </font></font><tt><font><font>HelloPOATie.java</font></font></tt><font><font> é um dos arquivos gerados. </font><font>O construtor para </font></font><tt><font><font>HelloPOATie</font></font></tt><font><font> leva um </font></font><tt><font><font>delegado</font></font></tt><font><font> ou um
 </font></font><tt><font><font>delegado</font></font></tt><font><font> e um </font></font><tt><font><font>poa</font></font></tt><font><font> . </font><font>Você deve fornecer a implementação para o </font></font><tt><font><font>delegado</font></font></tt><font><font> e / ou o </font></font><tt><font><font>poa</font></font></tt><font><font> , mas o delegado não precisa herdar de qualquer outra classe, apenas a interface </font></font><tt><font><font>HelloOperations</font></font></tt><font><font> . </font><font>Para maiores informações,</font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/mapping/jidlMapping.html"><em><font></font></em></a><font></font></p>
<p><font><font>Você pode usar o modelo Tie em vez do modelo típico de Herança se sua implementação deve herdar de alguma outra implementação. </font><font>Java permite qualquer número de herança de interface, mas há apenas um slot para herança de classe. </font><font>Se você usar o modelo de herança, esse slot será usado. </font><font>Ao usar o Tie Model, esse slot é liberado para seu próprio uso. </font><font>A desvantagem é que ele introduz um nível de indireção: uma chamada de método extra ocorre quando invocando um método.</font></font></p>
</li>
<li><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlImplBaseServer.html"><font><font>Java IDL: O exemplo "Hello World" com o ImplBase Server-Side Model</font></font></a>
<p><font><font>O modelo do lado do servidor ImplBase é um modelo de herança, como é o modelo POA. </font><font>Utilize o </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> com o
 </font></font><tt><font><font>sinalizador -oldImplBase</font></font></tt><font><font> para gerar ligações do lado do servidor que sejam compatíveis com versões do IDL Java anteriores ao J2SE 1.4. </font><font>Dada uma interface </font></font><tt><font><font>Hello</font></font></tt><font><font> definida em </font></font><tt><font><font>Hello.idl</font></font></tt><font><font> , o arquivo
 </font></font><tt><font><font>_HelloImplBase.java</font></font></tt><font><font> é gerado. </font><font>Você deve fornecer a implementação para o </font></font><tt><font><font>Hello</font></font></tt><font><font> e deve herdar de
 </font></font><tt><font><font>_HelloImplBase</font></font></tt><font><font> .</font></font></p>
<p><strong><font><font>Observe que o uso do </font><font>flag </font></font><tt><font><font>-oldImplBase</font></font></tt><font><font> não é padrão: essas APIs estão sendo obsoletas. </font><font>Você usaria esta bandeira apenas para compatibilidade com servidores existentes escritos em J2SE 1.3 ou anterior. </font><font>Nesse caso, você </font></font><tt><font><font>precisará modificar</font></font></tt><font><font> um MAKEFILE </font><tt><font>existente</font></tt><font> para </font><tt><font>adicionar o</font></tt><font> flag </font><tt><font>-oldImplBase</font></tt><font> ao </font></font><tt><font><font>compilador idlj</font></font></tt><font><font> 
, caso </font><tt><font>contrário</font></tt><font> os </font><tt><font>mapeamentos</font></tt><font> do lado do servidor baseados em POA serão gerados.</font></font></strong></p>
</li>
</ul>
<p><font><font>Este documento contém:</font></font></p>
<ul>
<li><font><font>O </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/hello.zip"><font><font>código de exemplo</font></font></a><font><font> para esta aplicação</font></font></li>
<li><font><font>O </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html#IDL"><font><font>IDL</font></font></a><font><font> para um simples programa "Hello World"</font></font></li>
<li><font><font>Um </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html#server"><font><font>servidor</font></font></a><font><font> que cria um objeto e publica-o com o serviço de nomeação usando a implementação do lado do servidor padrão (POA)</font></font></li>
<li><font><font>Um </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html#application"><font><font>cliente de aplicativo</font></font></a><font><font> que conhece o nome do objeto, recupera uma referência para ele a partir do serviço de nomeação e invoca o objeto</font></font></li>
<li><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample.html#instructions"><font><font>Instruções</font></font></a><font><font> para compilar e executar o exemplo</font></font></li>
</ul>
<p><font><font>Para criar esse exemplo, crie um diretório chamado </font></font><tt><font><font>hello /</font></font></tt><font><font> 
onde você desenvolve aplicativos de exemplo e crie os arquivos neste diretório, ou baixe o </font></font><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/hello.zip"><font><font>código de exemplo</font></font></a><font><font> e descompacte-o em seu diretório de aplicativos de amostra.</font></font></p>
<!--************IDL*************-->
<h2><a name="IDL" id="IDL"><font><font>Definindo a Interface ( </font></font><code>Hello.idl</code><font><font>)</font></font></a></h2>
<p>The first step to creating a CORBA application is to specify all
of your objects and their interfaces using the OMG's Interface
Definition Language (IDL). IDL has a syntax similar to C++ and can
be used to define modules, interfaces, data structures, and more.
The IDL can be mapped to a variety of programming languages. The
IDL mapping for Java is summarized in <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/mapping/jidlMapping.html">IDL to Java Language Mapping
Summary</a>.</p>
<p>The following code is written in the OMG IDL, and describes a
CORBA object whose <tt>sayHello()</tt> operation returns a string
and whose <tt>shutdown()</tt> method shuts down the ORB. To learn
more about OMG IDL Syntax and Semantics, read Chapter 3 of the <a href="http://www.omg.org/cgi-bin/doc?formal/99-10-07">CORBA 2.3.1
Specification</a>.</p>
<p><em><strong>Hello.idl</strong></em></p>
<pre class="codeblock"><font><font>Módulo HelloApp </font></font><font><font>
{ </font></font><font><font>
  interface Olá </font></font><font><font>
  { </font></font><font><font>
  string sayHello (); </font></font><font><font>
  Shutdown de uma só vez (); </font></font><font><font>
  }; </font></font><font><font>
};</font></font>
</pre>
<a name="interop" id="interop"></a> <b><font><font>NOTA:</font></font></b><font><font> Ao escrever código no OMG IDL, não utilize um nome de interface como o nome de um módulo. </font><font>Fazer isso corre o risco de obter resultados inconsistentes ao compilar com ferramentas de diferentes fornecedores, comprometendo assim a portabilidade do código. </font><font>Por exemplo, o código contendo os mesmos nomes pode ser compilado com o compilador IDL para Java da Sun Microsystems e obter um resultado. </font><font>O mesmo código compilado com outro fornecedor IDL para compilador Java pode produzir um resultado diferente.
</font></font><p><font><font>Para concluir o aplicativo, basta fornecer as implementações server ( </font></font><code>HelloServer.java</code><font><font>) e client ( </font></font><code>HelloClient.java</code><font><font>). 
</font></font><!--************TRANSIENT SERVER*************--></p>
<h2><a name="server" id="server"><font><font>Implementando o Server ( </font></font><code>HelloServer.java</code><font><font>)</font></font></a></h2>
<p>The example server consists of two classes, the servant and the
server. The servant, <tt>HelloImpl</tt>, is the implementation of
the <tt>Hello</tt> IDL interface; each <tt>Hello</tt> instance is
implemented by a <tt>HelloImpl</tt> instance. The servant is a
subclass of <tt>HelloPOA</tt>, which is generated by the
<tt>idlj</tt> compiler from the example IDL. The servant contains
one method for each IDL operation, in this example, the
<tt>sayHello()</tt> and <tt>shutdown()</tt> methods. Servant
methods are just like ordinary Java methods; the extra code to deal
with the ORB, with marshaling arguments and results, and so on, is
provided by the skeleton.</p>
<p>The <tt>HelloServer</tt> class has the server's <tt>main()</tt>
method, which:</p>
<ul>
<li>Creates and initializes an ORB instance</li>
<li>Gets a reference to the root POA and activates the
<tt>POAManager</tt></li>
<li>Creates a servant instance (the implementation of one CORBA
<tt>Hello</tt> object) and tells the ORB about it</li>
<li>Gets a CORBA object reference for a naming context in which to
register the new CORBA object</li>
<li>Gets the root naming context</li>
<li>Registers the new object in the naming context under the name
"Hello"</li>
<li>Waits for invocations of the new object from the client</li>
</ul>
<p>This example provides an example of a transient object server.
For an example of the "Hello World" program with a persistent
object server, see <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlExample2.html">Example 2: Hello
World with Persistent State</a>. For more discussion of CORBA
servers, see <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlServers.html"><em>Developing
Servers</em></a>.</p>
<p>For more discussion of the code, see the detailed tutorial topic
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/tutorial/GSserver.html">Getting Started with Java IDL:
Developing a Hello World Server</a>.</p>
<p><em><strong>HelloServer.java</strong></em></p>
<pre class="codeblock">// <strong>HelloServer.java</strong>
// <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/examplelicense.html">Copyright and License</a> 
import HelloApp.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;
import org.omg.CORBA.*;
import org.omg.PortableServer.*;
import org.omg.PortableServer.POA;

import java.util.Properties;

class HelloImpl extends HelloPOA {
  private ORB orb;

  public void setORB(ORB orb_val) {
    orb = orb_val; 
  }
    
  // implement sayHello() method
  public String sayHello() {
    return "\nHello world !!\n";
  }
    
  // implement shutdown() method
  public void shutdown() {
    orb.shutdown(false);
  }
}


public class HelloServer {

  public static void main(String args[]) {
    try{
      // create and initialize the ORB
      ORB orb = ORB.init(args, null);

      // get reference to rootpoa &amp; activate the POAManager
      POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
      rootpoa.the_POAManager().activate();

      // create servant and register it with the ORB
      HelloImpl helloImpl = new HelloImpl();
      helloImpl.setORB(orb); 

      // get object reference from the servant
      org.omg.CORBA.Object ref = rootpoa.servant_to_reference(helloImpl);
      Hello href = HelloHelper.narrow(ref);
          
      // get the root naming context
      // NameService invokes the name service
      org.omg.CORBA.Object objRef =
          orb.resolve_initial_references("NameService");
      // Use NamingContextExt which is part of the Interoperable
      // Naming Service (INS) specification.
      NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

      // bind the Object Reference in Naming
      String name = "Hello";
      NameComponent path[] = ncRef.to_name( name );
      ncRef.rebind(path, href);

      System.out.println("HelloServer ready and waiting ...");

      // wait for invocations from clients
      orb.run();
    } 
        
      catch (Exception e) {
        System.err.println("ERROR: " + e);
        e.printStackTrace(System.out);
      }
          
      System.out.println("HelloServer Exiting ...");
        
  }
}
&nbsp;
</pre>
<!--************APPLICATION*************-->
<h2><a name="application" id="application">Implementing the Client
Application (<code>HelloClient.java</code>)</a></h2>
<p>The example application client that follows:</p>
<ul>
<li>Creates and initializes an ORB</li>
<li>Obtains a reference to the root naming context</li>
<li>Looks up "Hello" in the naming context and receives a reference
to that CORBA object</li>
<li>Invokes the object's <tt>sayHello()</tt> and
<tt>shutdown()</tt> operations and prints the result</li>
</ul>
<p>For more discussion of the details of the code, see <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/tutorial/GSapp.html">Getting Started with Java IDL: Developing a
Client Application</a>.</p>
<p><em><strong>HelloClient.java</strong></em></p>
<pre class="codeblock">// <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/examplelicense.html">Copyright and License</a> 
&nbsp;
import HelloApp.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;
import org.omg.CORBA.*;

public class HelloClient
{
  static Hello helloImpl;

  public static void main(String args[])
    {
      try{
        // create and initialize the ORB
        ORB orb = ORB.init(args, null);

        // get the root naming context
        org.omg.CORBA.Object objRef = 
            orb.resolve_initial_references("NameService");
        // Use NamingContextExt instead of NamingContext. This is 
        // part of the Interoperable naming Service.  
        NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);
 
        // resolve the Object Reference in Naming
        String name = "Hello";
        helloImpl = HelloHelper.narrow(ncRef.resolve_str(name));

        System.out.println("Obtained a handle on server object: " + helloImpl);
        System.out.println(helloImpl.sayHello());
        helloImpl.shutdown();

        } catch (Exception e) {
          System.out.println("ERROR : " + e) ;
          e.printStackTrace(System.out);
          }
    }

}
&nbsp;
</pre>
<!--************COMPILING THE EXAMPLES************-->
<h2><a name="instructions" id="instructions">Building and Running
Hello World</a></h2>
<p>Despite its simple design, the Hello World program lets you
learn and experiment with all the tasks required to develop almost
any CORBA program that uses <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#invocation">static invocation</a>. Static
invocation, which uses a client stub for the invocation and a
server skeleton for the service being invoked, is used when the
interface of the object is known at compile time. If the interface
is not known at compile time, <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#DII">dynamic invocation</a> must be used.</p>
<p>This example requires a naming service, which is a CORBA service
that allows <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#CORBA%20object">CORBA
objects</a> to be named by means of binding a name to an object
reference. The <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#name%20binding">name
binding</a> may be stored in the naming service, and a client may
supply the name to obtain the desired object reference. The two
options for Naming Services shipped with this release of Java SE
include <tt><a href="http://docs.oracle.com/javase/7/docs/technotes/tools/share/orbd.html">orbd</a></tt>, a
daemon process containing a Bootstrap Service, a Transient Naming
Service, a Persistent Naming Service, and a Server Manager, and
<tt><a href="http://docs.oracle.com/javase/7/docs/technotes/tools/share/tnameserv.html">tnameserv</a></tt>,
a transient naming service that is provided for backward
compatibility. This example uses <tt>orbd</tt>.</p>
<p>When running this example, remember that, when using Solaris
software, you must become root to start a process on a port under
1024. For this reason, we recommend that you use a port number
greater than or equal to 1024. The <tt>-ORBInitialPort</tt> option
is used to override the default port number in this example. The
following instructions assume you can use port 1050 for the
Java&nbsp;IDL Object Request Broker Daemon, <tt>orbd</tt>. You can
substitute a different port if necessary. When running these
examples on a Windows machine, subtitute a backslash (\) in path
names.</p>
<p>To run this client-server application on your development
machine:</p>
<ol>
<li>Change to the directory that contains the file
<tt>Hello.idl</tt>.</li>
<li>Run the IDL-to-Java compiler, <tt>idlj</tt>, on the IDL file to
create stubs and skeletons. This step assumes that you have
included the path to the java/bin directory in your path.<br>
<pre class="codeblock">  idlj -fall  Hello.idl
</pre>
<p>You must use the <tt>-fall</tt> option with the <tt>idlj</tt>
compiler to generate both client and server-side bindings. This
command line will generate the default server-side bindings, which
assumes the POA Inheritance server-side model. For more information
on the <tt>idlj</tt> options, see <a href="http://docs.oracle.com/javase/7/docs/technotes/tools/share/idlj.html">IDL-to-Java compiler options</a>.</p>
<p>The <tt>idlj</tt> compiler generates a number of files. The
actual number of files generated depends on the options selected
when the IDL file is compiled. The generated files provide standard
functionality, so you can ignore them until it is time to deploy
and run your program. The files generated by the <tt>idlj</tt>
compiler for <tt>Hello.idl</tt>, with the <tt>-fall</tt> command
line option, are:</p>
<ul>
<li><tt>HelloPOA.java</tt>
<p>This abstract class is the stream-based <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#server%20skeleton">server skeleton</a>,
providing basic CORBA functionality for the server. It extends
<a href="http://docs.oracle.com/javase/7/docs/api/org/omg/PortableServer/Servant.html"><tt>org.omg.PortableServer.Serva
nt</tt></a> , and implements the <tt>InvokeHandler</tt> interface
and the <tt>HelloOperations</tt> interface. The server class
<tt>HelloImpl</tt> extends <tt>HelloPOA</tt>.</p>
</li>
<li><tt>_HelloStub.java</tt>
<p>This class is the <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#client%20stub">client stub</a>, providing CORBA
functionality for the client. It extends
<tt>org.omg.CORBA.portable.ObjectImpl</tt> and implements the
<tt>Hello.java</tt> interface.</p>
</li>
<li><tt>Hello.java</tt>
<p>This interface contains the Java version of our IDL interface.
The <tt>Hello.java</tt> interface extends
<tt>org.omg.CORBA.Object</tt>, providing standard CORBA object
functionality. It also extends the <tt>HelloOperations</tt>
interface and <tt>org.omg.CORBA.portable.IDLEntity</tt>.</p>
</li>
<li><tt>HelloHelper.java</tt>
<p>This class provides auxiliary functionality, notably the
<tt>narrow()</tt> method required to cast CORBA <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlGlossary.html#object%20reference">object references</a> to
their proper types.The Helper class is responsible for reading and
writing the data type to CORBA streams, and inserting and
extracting the data type from <tt>Any</tt>s. The Holder class
delegates to the methods in the Helper class for reading and
writing.</p>
</li>
<li><tt>HelloHolder.java</tt>
<p>This final class holds a public instance member of type
<tt>Hello</tt>. Whenever the IDL type is an <tt>out</tt> or an
<tt>inout</tt> parameter, the Holder class is used. It provides
operations for <tt>org.omg.CORBA.portable.OutputStream</tt> and
<tt>org.omg.CORBA.portable.InputStream</tt> arguments, which CORBA
allows, but which do not map easily to Java's semantics. The Holder
class delegates to the methods in the Helper class for reading and
writing. It implements
<tt>org.omg.CORBA.portable.Streamable</tt>.</p>
</li>
<li><tt>HelloOperations.java</tt>
<p>This interface contains the methods <tt>sayHello()</tt> and
<tt>shutdown()</tt>. The IDL-to-Java mapping puts all of the
operations defined on the IDL interface into this file, which is
shared by both the stubs and skeletons.</p>
</li>
</ul>
</li>
<li>Compile the <tt>.java</tt> files, including the stubs and
skeletons (which are in the directory <tt>HelloApp</tt>). This step
assumes the java/bin directory is included in your path.
<pre class="codeblock">   javac *.java HelloApp/*.java
</pre></li>
<li>Start <tt>orbd</tt>.
<p>To start <tt>orbd</tt> from a UNIX command shell, enter:</p>
<pre class="codeblock">  orbd -ORBInitialPort 1050&amp;
</pre>
<p>From an MS-DOS system prompt (Windows), enter:</p>
<pre class="codeblock">  start orbd -ORBInitialPort 1050
</pre>
<p>Note that <tt>1050</tt> is the port on which you want the name
server to run. The <tt>-ORBInitialPort</tt> argument is a required
command-line argument. Note that when using Solaris software, you
must become root to start a process on a port under 1024. For this
reason, we recommend that you use a port number greater than or
equal to 1024.</p>
<p>For an example of how to run this program on two machines, see
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/tutorial/jidl2machines.html">Running the Hello World
Program on 2 machines</a>.</p>
</li>
<li>Start the Hello server:
<p>To start the Hello server from a UNIX command shell, enter:</p>
<pre class="codeblock">  java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost&amp;
</pre>
<p>From an MS-DOS system prompt (Windows), enter:</p>
<pre class="codeblock">  start java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost
</pre>
<p>You will see <tt>HelloServer ready and waiting...</tt> when the
server is started.</p>
<p>For this example, you can omit <tt>-ORBInitialHost
localhost</tt> since the name server is running on the same host as
the Hello server. If the name server is running on a different
host, use <tt>-ORBInitialHost</tt> <em>nameserverhost</em> to
specify the host on which the IDL name server is running.</p>
<p>Specify the name server (<tt>orbd</tt>) port as done in the
previous step, for example, <tt>-ORBInitialPort 1050</tt>.</p>
</li>
<li>Run the client application:
<pre class="codeblock">  java HelloClient -ORBInitialPort 1050 -ORBInitialHost localhost
</pre>
<p>When the client is running, you will see a response such as the
following on your terminal: <code>Obtained a handle on server
object: IOR: (binary code) Hello World! HelloServer
exiting...</code></p>
<p><font><font>Para este exemplo, você pode omitir </font></font><tt><font><font>-ORBInitialHost localhost</font></font></tt><font><font> desde que o servidor de nomes está sendo </font><tt><font>executado</font></tt><font> no mesmo host que o cliente Hello. </font><font>Se o servidor de nomes estiver em execução em um host diferente, use- </font></font><tt><font><font>ORBInitialHost </font></font></tt> <em><font><font>nameserverhost</font></font></em><font><font> para </font><em><font>especificar</font></em><font> o host no qual o servidor de nomes IDL está sendo </font><em><font>executado</font></em><font> .</font></font></p>
<p><font></font><tt><font><font>Especifique a</font></font></tt><font><font> porta </font><font>do servidor de nomes ( </font><tt><font>orbd</font></tt><font> ) como feito na etapa anterior, por exemplo, </font></font><tt><font><font>-ORBInitialPort 1050</font></font></tt><font><font> .</font></font></p>
</li>
</ol>
<p><font><font>Quando tiver </font></font><tt><font><font>terminado</font></font></tt><font><font> este tutorial, </font><tt><font>certifique</font></tt><font> -se de desligar ou matar o servidor de nomes ( </font><tt><font>orbd</font></tt><font> ). </font><font>Para fazer isso a partir de um prompt do DOS, selecione a janela que está executando o servidor e digite
 </font></font><tt><font><font>Ctrl + C</font></font></tt><font><font> para desligá-lo. </font><font>Para fazer isso a partir de um shell Unix, localize o processo e mate-o. </font><font>O servidor continuará a esperar por invocações até que seja explicitamente interrompido.</font></font></p>
<p><strong><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/idl/tutorial/jidl2machines.html"><font><font>Executar o aplicativo Hello World em duas máquinas</font></font></a></strong><font><font> descreve uma maneira de distribuir o aplicativo simples em duas máquinas - um cliente e um servidor.</font></font></p>

<div id="javasefooter">
<div class="hr">
<hr></div>
<div id="javasecopyright">
<a href="http://docs.oracle.com/javase/7/docs/legal/cpyr.html"><font><font>Copyright ©</font></font></a><font><font> 1993, 2014, Oracle e / ou suas afiliadas. </font><font>Todos os direitos reservados.
</font></font></div>

<div id="javasecontactus">
<a href="http://docs.oracle.com/javase/feedback.html"><font><font>Contate-Nos</font></font></a>
</div>
</div>
</div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/s_code_download.js"></script>
<script language="JavaScript" type="text/javascript" src="./Java IDL_ O exemplo _Hello World__files/s_code.js"></script>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript" type="text/javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>
 
<!-- End SiteCatalyst code --><div id="goog-gt-tt" class="goog-tooltip skiptranslate" dir="ltr" style="visibility: hidden; left: 901px; top: 204px; display: none;"><div style="padding: 8px;"><div><div class="logo"><img src="./Java IDL_ O exemplo _Hello World__files/translate_24dp.png" width="20" height="20" alt="Google Tradutor"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Texto original</h1></div><div class="middle" style="padding: 8px;"><div class="original-text">For more information on the development process, and a more detailed tutorial on creating a CORBA application using IDL, see Getting Started with Java IDL: The Hello World Tutorial .</div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Sugerir uma tradução melhor</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none; opacity: 0;"></div></div>



<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body><object id="d90afb4a-186b-9b8a-c9ea-e897d9b6b4bc" width="0" height="0" type="application/gas-events-cef"></object></html>